
# 网页结构分析

## 核心思路
通用爬虫要解决的最大的问题：
- 从不同的网站HTML结构中找到重要数据
- 对不同每一个板块的title和content进行配对

解决方案：
- 每一个HTML节点的子节点数从多到少排列生成一个广义表，能大致锁定有很多条目的HTML节点，比如新闻主页的导航栏和专栏、文章页面的评论、表格、搜索引擎搜索结果等，后面的操作将基于该广义表进行
- 根据每一个HTML节点的字符数，能大致锁定该网页中文字集中分布的HTML节点，比如文章页面
- 找到主要信息的所在位置后，其余信息就在该HTML节点的周围，我们可以建立相应的匹配

问题：
- 我们希望最后的数据是带有标签的，但是很难让程序自动为我们生成正确的标签，所以需要人为的去核对并重新标记某些标签，这些标记在后面将会成为训练人工智能模型的数据集

# 反向查找标题和其它属性

在拿到重要节点后，进行横向和纵向的查找，观察发现，标题通常都是以h进行修饰，如果重要节点是文章那么标题通常在文章所在节点的兄弟节点或者父节点的兄弟节点

## 锁定标题
- 从文章节点兄弟节点开始检查是否含有h修饰的节点，且在文章上方，如果没有再往上一层级跳直到找到h节点
- 针对新闻首页类型的多个模块的网页道理也相同，每条信息往上第一个h就是标题

## 锁定导航栏
- 导航栏通常是列表且长度较短

## 网站结构实例分析
- 标题模式

百度新闻文章标题使用的h1
百度新闻首页在找到大量文本的DIV后，可以通过查看兄弟节点确定标题
知乎首页标题也是h2，兄弟节点div就是简介，但是没有p节点，文字和节点之间也还有几个节点

CSDN首页同样结构，虽然中间有很多层，但是标题和简介还有一些属性总有几个兄弟节点

也就是说对于首页来说，只我们先找到包含h1h2这样的标题字段，就说明有可能是标题，他的父节点的兄弟节点有可能是简介，也可能继续往上，我们可以h2的标题节点一直往上，直到突然文本多起来，说明这个节点下包含了标题和简介，确定这个节点下的n个子节点，排除到包含标题的节点，其它节点便是这个标题对应的信息

- 正文模式

百度新闻一篇文章中含有大量p
知乎文章h2标题，还是有很多p，都在一个div里面

百度知道就有点麻烦，有点和找标题有点类似，现在能找到标题和正文的位置关


# 多张页面：
这种类型的网站通常结构相似，内容不同，比如住房信息和博客文章等
- 两张页面进行交叉对比，找出文本内容或者图片地址发送改变的HTML节点
- 再进行过滤